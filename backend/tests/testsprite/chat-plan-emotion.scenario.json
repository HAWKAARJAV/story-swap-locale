{
  "name": "StorySwap AI Core Flow",
  "description": "Validate chat, travel plan generation, and emotion analysis endpoints.",
  "env": {
    "BASE_URL": "http://localhost:3001",
    "API_VERSION": "v1"
  },
  "steps": [
    {
      "name": "AI Chat Missing Auth",
      "request": {
        "method": "POST",
        "url": "${BASE_URL}/api/${API_VERSION}/agentx/chat",
        "headers": { "Content-Type": "application/json" },
        "body": { "message": "Hello" }
      },
      "assert": { "status": 401 }
    },
    {
      "name": "AI Chat Valid",
      "request": {
        "method": "POST",
        "url": "${BASE_URL}/api/${API_VERSION}/agentx/chat",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer ${TOKEN}"
        },
        "body": { "message": "Plan a mountain trek with heritage stops" }
      },
      "assert": {
        "status": 200,
        "json.success": true,
        "json.content*": "mountain"
      }
    },
    {
      "name": "Travel Plan Adventure",
      "request": {
        "method": "POST",
        "url": "${BASE_URL}/api/${API_VERSION}/travel/plan",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer ${TOKEN}"
        },
        "body": { "currentMood": "adventure thrill", "userInput": "Need rugged terrain", "userId": "u1" }
      },
      "assert": {
        "status": 200,
        "json.success": true,
        "json.data.itinerary.length>": 0
      }
    },
    {
      "name": "Emotion Analysis Cultural",
      "request": {
        "method": "POST",
        "url": "${BASE_URL}/api/${API_VERSION}/travel/analyze-emotion",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer ${TOKEN}"
        },
        "body": { "storyTitle": "Temple Walk", "storyContent": "Ancient temple heritage culture history carvings" }
      },
      "assert": {
        "status": 200,
        "json.success": true,
        "json.data.emotion?": true
      }
    },
    {
      "name": "Emotion Missing Content 400",
      "request": {
        "method": "POST",
        "url": "${BASE_URL}/api/${API_VERSION}/travel/analyze-emotion",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer ${TOKEN}"
        },
        "body": { "storyTitle": "Only title" }
      },
      "assert": { "status": 400 }
    }
  ]
}
